[build]
builder = "dockerfile"
dockerfile = "Dockerfile"

[deploy]
startCommand = "npm start --prefix web"
healthcheckPath = "/api/health"
healthcheckInterval = 30
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 5

# Cron Job para el Sniffer (Cada 5 minutos en Railway)
# Nota: Railway permite definir servicios adicionales o usar el scheduler
# Aqu√≠ configuramos una tarea secundaria si se usa el CLI o se puede configurar via Railway Dashboard
[[services]]
name = "sniffer-cron"
startCommand = "bash tools/run_sniffer_cron.sh"
schedule = "*/5 * * * *"
